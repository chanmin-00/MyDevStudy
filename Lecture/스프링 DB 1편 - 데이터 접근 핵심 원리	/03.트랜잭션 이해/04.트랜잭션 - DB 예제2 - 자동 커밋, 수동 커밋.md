# 자동 커밋과 수동 커밋

둘은 데이터베이스에서 쿼리를 실행한 결과를 언제 반영할 것인가에 대한 설정 차이이며, 트랜잭션의 성격과도 밀접하게 연결된다.

## 자동 커밋

자동 커밋은 말 그대로, 쿼리를 실행하면 자동으로 커밋이 수행되는 방식이다. 개발자가 `commit`을 명시적으로 호출하지 않아도, 한 줄 한 줄 실행될 때마다 변경 내용이 즉시 데이터베이스에 반영된다.

```sql
set autocommit true; -- 자동 커밋 모드 설정

insert into member(member_id, money) values ('data1', 10000); -- 자동 커밋
insert into member(member_id, money) values ('data2', 10000); -- 자동 커밋
```

이처럼 자동 커밋 모드에서는 각 SQL 문장이 실행될 때마다 그 결과가 곧바로 저장되므로, 트랜잭션의 개념을 적용하기가 어렵다. 

예를 들어 여러 개의 작업을 묶어서 하나의 트랜잭션으로 처리하고 싶은데, 이미 첫 번째 쿼리 실행 후 결과가 커밋되어 버리면, 나머지 작업과 하나의 단위로 묶을 수 없게 된다.

## 수동 커밋

트랜잭션을 제대로 사용하고자 한다면 자동 커밋을 끄고, 수동 커밋 모드로 전환해야 한다. 

수동 커밋 모드에서는 사용자가 명시적으로 `commit` 또는 `rollback`을 호출해야만 데이터베이스에 변경 사항이 반영된다.

```sql
set autocommit false; -- 수동 커밋 모드 설정

insert into member(member_id, money) values ('data3', 10000);
insert into member(member_id, money) values ('data4', 10000);

commit; -- 명시적으로 커밋해야 변경 내용이 저장됨
```

이제부터는 커밋하지 않으면 데이터가 저장되지 않고, 언제든지 rollback을 통해 변경사항을 취소할 수 있다. 

이처럼 자동 커밋을 끄고 수동 커밋으로 설정하는 것을 우리는 흔히 트랜잭션을 시작했다고 표현한다.

수동 커밋 모드로 설정한 이후에는, 반드시 `commit` 또는 `rollback`을 명시적으로 호출해야 한다. 그렇지 않으면 데이터베이스에 따라 트랜잭션 타임아웃이 발생해 세션이 종료되거나 변경이 취소될 수 있다.

자동 커밋과 수동 커밋은 세션 단위로 설정되며, 한 번 설정하면 해당 세션 동안은 계속 유지된다. 중간에 `set autocommit true/false`를 사용해 모드를 전환하는 것도 가능하지만, 실수하지 않도록 신중하게 다뤄야 한다.
