# Container

<img width="467" height="189" alt="image" src="https://github.com/user-attachments/assets/c909225f-ab6c-40a7-867b-0637e6afea06" />

컨테이너는 **가상화된 운영체제 위에서 애플리케이션을 독립적으로 실행하기 위해 필요한 파일과 환경을 묶어둔 패키지**다. 즉, **소스코드, 라이브러리, 실행 환경, 앱 실행에 필요한 종속성 등을 함께 번들링하여 어디서든 동일한 방식으로 실행**할 수 있도록 한다.

이런 특징 덕분에 컨테이너는 애플리케이션의 이식성과 일관성을 보장하며, **개발 환경과 운영 환경의 차이로 발생하는 문제를 크게 줄여준다.**

## Hypervisor 기술과 Container 기술

### **Virtual Machine (VM, 가상머신)**

물리적 하드웨어 위에 Host OS가 있고, 그 위에 Hypervisor가 설치된다. Hypervisor는 여러 개의 VM을 올리는데, VM마다 **Guest OS**를 포함해야 한다. 따라서 애플리케이션과 라이브러리(Bins/Libs), 그리고 Guest OS까지 묶여 실행된다.

이러한 특성 때문에 독립성과 격리성이 뛰어나 안정적이다. 그러나 Guest OS가 반드시 필요해 리소스 소모가 크고 무겁다. 부팅 및 실행 속도가 느리고, 배포 효율도 낮다.

### Container

물리적 하드웨어와 **Host OS 위에 Container Engine(Docker 등)이 올라간다.** 컨테이너는 Guest OS 없이 애플리케이션과 필요한 라이브러리만 포함한다. 즉, **Host OS의 커널을 공유하면서도 서로 격리된 환경에서 실행된다.**

이러한 특성 때문에 VM보다 훨씬 가볍고 효율적이다. 게스트 OS가 없으므로 오버헤드가 최소화된다. 실행 속도가 빠르고, 배포, 확장이 유연하다. 마이크로서비스 아키텍처와 잘 어울리며 클라우드 네이티브 환경의 핵심 기술이다.

## 특징

컨테이너는 **애플리케이션을 가볍고 효율적으로 생성, 배포, 운영**할 수 있도록 돕는 핵심 기술이다. 단순히 실행 환경을 묶어주는 것에 그치지 않고, 개발과 운영 방식을 혁신적으로 바꾼다.

특징은 다음과 같다.

- **가볍고 기민한 배포** : 컨테이너 이미지를 기반으로 애플리케이션을 빠르게 생성하고 배포할 수 있다. **빌드, 릴리즈 단계에서 이미지로 표준화되므로, 어디서든 동일한 환경을 재현 가능**하다.
- **지속적 통합, 배포(CI/CD)와 적합** : 안정적으로 이미지를 빌드, 배포할 수 있어 **지속적인 개발과 배포 자동화**가 가능하다. 이를 통해 민첩한 서비스 출시가 가능하다.
- **개발과 운영의 관심사 분리** : 애플리케이션 이미지를 만들면 개발과 운영이 명확히 분리된다. 운영자는 인프라 관리에, 개발자는 코드와 기능 개선에 집중할 수 있다.
- **가시성(Observability)** : 애플리케이션 상태를 헬스 체크와 외부 신호로 쉽게 모니터링할 수 있다. 장애 탐지와 대응이 신속하다.
- **일관성 있는 환경 제공** : 로컬(Laptop), 클라우드, 온프레미스 어디서나 동일하게 실행된다. 개발, 테스트, 운영 환경 간 차이가 줄어들어 배포 안정성이 높다.
- **높은 이식성** : 클라우드 및 OS 배포판 간 일관성이 뛰어나 멀티 클라우드 환경에서도 유연하다.
- **애플리케이션 중심 관리** : OS 중심이 아닌 애플리케이션 단위로 관리가 이루어지며, 리소스 사용 효율이 높다. 필요 시 자유롭게 마이크로서비스 아키텍처로 확장할 수 있다.
- **격리성과 안정성** : 컨테이너 단위로 격리되어 실행되므로 성능 예측이 쉽고 안정적이다.
- **고효율 리소스 사용** : 리소스를 공유하면서도 독립적으로 실행되어 효율성이 높고 비용 절감 효과가 있다.

## **Container Engine & Container Runtime**

**컨테이너 기술은 크게 컨테이너 엔진(Container Engine)과 컨테이너 런타임(Container Runtime)으로 구분**된다. 두 개념은 밀접히 연결되어 있으며, 함께 작동하여 컨테이너의 생성, 실행, 관리를 담당한다.

### 1. Container Engine

컨테이너 엔진은 **컨테이너를 관리하기 위한 소프트웨어 레이어**다. API나 CLI(Command Line Interface) 도구를 통해 사용자가 컨테이너를 다룰 수 있게 한다.

사용자의 명령을 받아 컨테이너 이미지를 내려받고(pull), 컨테이너 실행 방식을 정의하는 메타데이터를 생성한다. 이후 이 정보를 컨테이너 런타임에 전달하여 실제 실행이 가능하도록 한다.

대표적인 엔진에는 다음과 같은 것들이 있다.

- Docker Engine (docker-ce), 현재 가장 널리 사용된다.
- Podman (Red Hat)
- rkt (로켓 컴퍼니)

### 2. Container Runtime

컨테이너 런타임은 **컨테이너 이미지를 실제로 실행하는 도구**다. 루트 파일시스템과 메타데이터(spec file)를 받아 컨테이너를 구동한다.

**즉, 엔진이 무엇을 실행할지 정하면, 런타임은 그것을 실제로 실행하는 역할을 한다.**

대표적인 런타임에는 다음과 같은 것들이 있다.

- **runC**, OCI(Open Container Initiative) 표준을 준수하는 가장 일반적인 런타임
- **containerd**, Docker 내부적으로도 사용되는 런타임
- **cri-o**, Kubernetes 환경에서 많이 쓰이는 런타임, runC 기반
