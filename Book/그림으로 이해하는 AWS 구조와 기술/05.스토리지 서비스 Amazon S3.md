# Amazon S3란: 사용하기 쉬우며 기능이 강력한 스토리지 서비스

## Amazon S3란?

Amazon S3 (Simple Storage Service) 는 객체 스토리지 서비스로, 데이터를 객체 단위로 저장하고 인터넷을 통해 접근할 수 있도록 해주는 서비스이다.

용량 제한 없이 시작할 수 있고, 웹 서버 기능이나 쿼리 기능 등 다양한 편의 기능도 제공된다.

- 간단한 웹 서버 구축 가능 (정적 웹 호스팅)
- 쿼리 기능을 통해 데이터 분석 가능
- 클라우드 기반으로 확장, 축소 용이
- 종량 과금제로 초기 비용 부담 없음

## 견고하고 스마트한 스토리지 서비스

### 확장성

- EC2처럼 쉽게 확장·축소 가능
- 다양한 스토리지 클래스 제공
- 수명 주기 정책으로 클래스 간 자동 이동 가능

### 가용성 / 내구성

- 99.999999999% 내구성
- S3 객체는 최소 4개의 가용 영역에 자동 복제됨
- 장애 발생 시에도 데이터 사용 가능

### 신뢰성

- 암호화 및 접근 관리 도구 제공
- 각종 규정 준수 (PCI-DSS, HIPAA, FedRAMP, EU GDPR 등)
- 감사 기능도 제공

### 관리 및 분석 기능

- 스토리지 클래스 분석, 수명 주기 정책 등
- S3 Select를 통한 쿼리 실행 가능
- Amazon Athena, Redshift Spectrum, AWS Lambda와도 연동 가능

## 요금 체계

요금은 스토리지 클래스와 리전에 따라 다르며, 기본적으로 저장 용량과 전송량을 기준으로 종량 과금된다.

### 저장 용량

- 저장된 파일의 용량에 대해 과금
- 스토리지 클래스별로 일할 계산, 30일/90일/180일 단위 요금 적용
- 최소 요금 기준 존재 (작은 파일도 일정 크기로 간주)

### 전송량

- 파일의 업로드(송신 요청: PUT) 와 다운로드(수신 요청: GET) 에 대해 과금
- 1GB 단위로 부과

## 전송량 개념

- GET (수신 요청): 파일 다운로드 요청
- PUT (송신 요청): 파일 업로드 요청

# 스토리지 클래스: 다양한 종류의 스토리지

## 스토리지 클래스란?

Amazon S3에서는 저장 목적이나 액세스 빈도에 따라 다양한 스토리지 클래스(Storage Class) 를 제공한다.

사용자는 데이터의 용도, 중요도, 접근 빈도에 따라 클래스를 선택할 수 있으며, 객체 단위로 지정 가능하다.

- 버킷 단위가 아닌 객체 단위로 적용 가능
- 필요 시 수동 변경, 또는 수명 주기 정책으로 자동 전환 가능

## 스토리지 클래스의 종류

| 클래스 | 특징 요약 | 최소 저장 기간 | 최소 용량 요금 | 검색 요금 |
| --- | --- | --- | --- | --- |
| **Standard** | 가장 일반적인 클래스, 3개 AZ에 저장, 고가용성(99.9%) | ❌ 없음 | ❌ 없음 | ❌ 없음 |
| **Intelligent-Tiering** | 액세스 패턴 모니터링 → 자주/간헐 계층 자동 이동 | ✅ 있음 | ❌ 없음 | ❌ 없음 |
| **Standard-IA (Infrequent Access)** | 낮은 저장 요금, 높은 검색 요금 → 드물게 사용하는 큰 파일에 적합 | ✅ 있음 | ✅ 있음 | ✅ 있음 |
| **One Zone-IA** | 단일 AZ에 저장, 비용 저렴하지만 내구성 낮음 | ✅ 있음 | ✅ 있음 | ✅ 있음 |
| **Reduced Redundancy Storage (RRS)** | 이중화 줄인 옵션, 낮은 비용, 위험 있음 | - | ✅ 있음 | ✅ 있음 |
| **Glacier / Glacier Deep Archive** | 아카이브 및 장기 백업용, 매우 저렴, 검색 시 지연 | ✅ 있음 | ✅ 있음 | ✅ 있음 |

### 1. **Standard**

- 가장 일반적이고 보편적인 클래스
- 최소 3개 이상의 AZ에 저장
- 가용성 99.9%, 내구성 99.999999999%
- 검색 요금/최소 용량 요금 없음
- 일할 계산 가능 → 유연하게 사용 가능

### 2. **Intelligent-Tiering**

- 객체의 액세스 빈도를 자동 모니터링
- 빈번/간헐 계층 간 자동 이동 → 예: 30일간 액세스 없으면 간헐 계층으로 이동
- 검색 요금, 이동 요금 없음
- 자주/드물게 사용되는 데이터가 혼재된 경우 적합
- 최소 저장 기간 요금은 존재 → 단기 파일에는 부적합
    
    ![image](https://github.com/user-attachments/assets/a21db2d9-8bdc-4c5b-a167-ebead6d05ba8)

    

### 3. **Standard-IA (Infrequent Access)**

- 저장 요금은 저렴하지만, 검색 요금은 상대적으로 높음
- 액세스 빈도가 낮고, 용량이 큰 파일에 적합
- 예: 로그 백업, 보안 영상 등

### 4. **One Zone-IA**

- Standard-IA와 유사하지만, 단일 AZ에만 저장
- 물리적 문제가 발생하면 데이터 유실 위험 존재
- 비용은 더 저렴, 하지만 중요 데이터에는 부적합

### 5. **Reduced Redundancy Storage (RRS)**

- 정확히는 옵션이지만, 스토리지 클래스처럼 사용됨
- 이중화 수준을 낮춰 비용 절감 → AZ 한 곳에만 저장
- 내구성이 낮아, 복원 가능한 캐시나 비중요 데이터에만 사용 권장

### 6. **S3 Glacier / Glacier Deep Archive**

- 아카이브, 장기 보관용 스토리지
- 저장 비용은 매우 저렴
- 읽을 때는 복원 과정 필요, 대기 시간 있음
- 일부 검색 가능하지만, 대부분 전체 데이터 단위 복원
- 데이터는 `볼트(Vault)` 라는 컨테이너에 저장
- 검색 시 양쪽(Glacier + 대상)에 요금 부과
    
    ![image](https://github.com/user-attachments/assets/51322041-bb2e-4312-9d92-4f92d3238894)

    

# S3 의 사용 절차 : 스토리지 서비스를 사용하기까지

S3는 파일을 버킷(bucket) 에 저장하며, 저장된 파일은 객체(object) 라고 부른다. 객체는 `버킷 + 객체 키 + 버전`으로 식별된다.

## S3 조작

- S3 기본 조작은 AWS 관리 콘솔의 S3 대시보드에서 수행
- 파일 업로드는 콘솔에서도 가능하지만, 매번 로그인은 번거롭기 때문에 API나 SDK 또는 AWS Transfer for SFTP를 통해 간편하게 수행할 수 있음

### cf) API와 SDK

| 구분 | 설명 |
| --- | --- |
| **API** | 운영체제나 언어가 제공하는 기능을 제어하는 인터페이스 |
| **SDK** | 특정 시스템/언어용 도구 모음 패키지. API를 쉽게 사용 가능 |
| → | 콘솔에서 할 수 있는 모든 작업은 API/SDK로도 수행 가능 |

## S3 서비스의 기능

S3에서 자주 쓰이는 용어들은 아래와 같다.

| 항목 | 내용 |
| --- | --- |
| 객체 (Object) | S3에 저장되는 텍스트/이미지 등의 파일 단위 엔터티 |
| 버킷 (Bucket) | 객체를 저장하는 컨테이너 역할 |
| 버킷명 | 전 세계에서 유일해야 하며, 웹 호스팅 시 도메인명으로 사용 |
| 객체 키 | 객체의 고유 식별자 (버킷 + 키 + 버전 조합으로 식별) |
| 객체 메타데이터 | 사람이 보기 쉽도록 설정하는 이름-값 세트 |
| 리전 (Region) | 버킷의 물리적 저장 위치 |
| 데이터 일관성 모델 | 고가용성을 위해 복제 저장되며, 무결성 보장. 단, 복제 지연은 있을 수 있음 |
| 버전 관리 | 객체의 여러 버전을 보관 가능 (각 버전은 별도 객체로 취급) |
| 로그 | 버킷/객체 단위의 접근 로그 기록 (객체 로그는 유료) |
| 암호화 | S3에 저장되는 데이터는 자동 암호화 가능 |
| 액세스 제어 | 버킷에 대한 접근 권한 설정 가능 |
| 웹 서비스 기능 | S3 버킷을 정적 웹사이트로 사용 가능 |
| 객체 태그 | 객체에 키-값 형태의 태그 부여 가능 (검색, 설정 값 전달 등 활용) |

## S3의 사용 절차

S3는 매니지드 서비스이므로 EC2처럼 SSH로 접속하는 방식이 아니라 S3 대시보드 또는 전용 도구를 통해 조작한다.

### 1. AWS에 로그인한다

- 리전을 선택하고 S3 대시보드 접속

### 2. 버킷을 만든다

- 버킷명 지정

### 3. 버킷을 설정한다

- 웹 서버로 사용할 경우: Static website hosting 활성화
- 접근 제어 설정

### 3. 파일을 업로드한다

- 콘솔, API, SDK 또는 SFTP 전송 도구를 통해 업로드

## S3 버킷 생성 전 검토해야 할 것

- 버킷명과 리전은 생성 후 변경 불가
- 생성 전 목적을 명확히 설계해야 함
    - 예: 웹 서버 용도인지, 데이터 저장소 용도인지
- 웹 서버로 사용할 경우:
    - 공개 설정, 도메인 연결, 익명 접속 허용 여부 등을 신중히 결정
- 테스트용 버킷을 먼저 만들어 확인한 후 본격적인 버킷을 생성하는 것이 바람직함
- S3는 생성/삭제가 간편하므로 테스트는 자유롭게 가능하지만 외부 공개가 필요한 버킷은 실수로 노출되지 않도록 주의해야 함

# 객체와 버킷 : 파일과 파일을 저장하는 장소

S3에서 버킷명은 전역에서 유일해야 하며, DNS 명명 규칙을 따라야 한다. 또한 객체는 단순한 파일이 아니라 메타데이터를 포함한 저장 단위이다.

## 객체와 버킷이란

- 버킷(bucket) 은 윈도우의 C:, D: 드라이브처럼 파일을 저장하는 논리적 저장소
- 객체(object) 는 실제 저장되는 파일 단위 엔터티 (텍스트, 이미지 등 + 메타데이터 포함)
    
    
    | 항목 | 설명 |
    | --- | --- |
    | **버킷은 폴더가 아님** | 버킷 안에 다시 버킷을 만들 수 없음 |
    | **버킷 수 제한** | 기본: 계정당 100개, 신청 시 최대 1,000개까지 확장 가능 |
    | **객체 수/총 용량 제한 없음** | 한 버킷에 객체를 무제한으로 저장 가능 |
    | **메타데이터 포함** | 객체는 단순한 파일이 아닌, 속성 정보(메타데이터) 포함 |

### 폴더처럼 보이는 이유?

- S3는 객체 스토리지로, 실제로는 폴더나 디렉터리 구조가 없음
- 객체는 버킷에 병렬 구조로 저장
- 하지만 사용자 편의를 위해 콘솔에서는 폴더처럼 표시되며, 폴더 생성, 삭제, 업로드, 다운로드도 가능

## 버킷 생성과 명명 규칙

- 버킷 생성 시 주의사항:
    - 리전(region) 과 버킷명은 생성 후 변경 불가
    - 신중하게 설계 및 결정 필요
- 버킷명 유일성 원칙:
    - S3 내에서 전 세계적으로 유일해야 함
    - 다른 AWS 사용자와 중복 불가
    - 리전을 바꿔도 같은 이름의 버킷은 생성 불가→ 기존 버킷을 삭제하고 다시 만들어야 함
- 명명 규칙 존재:
    - DNS 호환 가능해야 함
    - 일반적으로 영문 소문자, 숫자, 하이픈(-) 사용 가능 (예: `my-bucket-2025`)

# 버킷 정책과 사용자 정책 : 액세스 제한 설정

Amazon S3에서는 버킷 정책(bucket policy) 과 사용자 정책(user policy) 을 통해 누가 어떤 리소스에 어떤 작업을 할 수 있을지 세부적으로 제어할 수 있다.

## S3 버킷에 대한 액세스 제한

S3의 액세스 제한 방식은 다음과 같은 3가지 방법으로 설정할 수 있다.

| 방법 | 설명 |
| --- | --- |
| 버킷 정책 (Bucket Policy) | 버킷 단위로 접근 제어→ 이 버킷에 접근 가능한 사용자 지정 |
| 사용자 정책 (User Policy) | IAM 사용자/그룹 단위로 접근 제어→ 이 사용자가 접근 가능한 버킷 지정 |
| ACL (Access Control List) | 타 AWS 계정의 읽기/쓰기 권한을 개별 객체 단위로 허용 또는 거부 |

> 버킷이 많고 사용자 수가 적을 경우 → 사용자 정책이 유리
> 
> 
> 사용자가 많고 버킷 수가 적을 경우 → 버킷 정책이 유리
> 

## 액세스 제한의 대상과 내용

S3의 정책은 누가, 무엇을, 어떻게 할 수 있는지를 정하는 구조이다. 이를 위해 다음 4가지 항목을 설정한다.

| 항목 | 내용 |
| --- | --- |
| 리소스(Resource) | 제한 대상인 S3 버킷 및 객체→ ARN(Amazon Resource Name)으로 지정 |
| 작업(Action) | 수행 가능한 작업→ 예: `s3:GetObject`, `s3:PutObject`, `s3:DeleteObject` |
| 효과(Effect) | 권한 허용 여부→ `Allow`(허가), `Deny`(거부) |
| 보안 주체(Principal) | 권한을 주거나 제한할 사용자, 계정, 서비스 등 |

예를 들어,

- 특정 사용자가 `my-bucket` 안의 파일을 다운로드(`GetObject`) 할 수 있도록 허용하거나,
- 특정 사용자에게 버킷 전체에 대한 쓰기 권한(`PutObject`)을 명시적으로 거부할 수 있다.

# 웹 사이트 호스팅 :웹 사이트 공개

S3는 단순한 저장소를 넘어 정적 웹 사이트 호스팅 기능을 제공한다. 버킷을 웹 사이트처럼 설정해 URL을 통해 외부에 공개할 수 있으며, 간단한 설정만으로 누구나 정적 웹사이트를 배포할 수 있다.

## 웹 사이트 호스팅이란

- S3는 정적 웹 사이트를 호스팅할 수 있는 기능을 제공한다.
- 정적 웹 사이트란:
    - 서버 측 스크립트를 사용하지 않고,
    - HTML, 이미지, CSS, JavaScript 등 클라이언트 측 리소스만으로 구성된 사이트
- 반면, PHP, JSP, ASP.NET 등 서버에서 처리되는 언어는 동적 웹 사이트로 분류되며, S3에서는 실행할 수 없다.
- 정적 웹 호스팅은 S3 버킷을 공개하고, URL을 설정하면 바로 사용할 수 있다.

## 웹 호스팅에 필요한 설정

정적 웹 사이트로 호스팅하려면 다음과 같은 설정이 필요하다.

1. 정적 웹 호스팅 활성화
2. 공용 액세스(Public Access) 차단 해제
3. 버킷 정책을 '모든 사용자 허용'으로 설정
4. 버킷명을 도메인명으로 지정
5. 개인 도메인을 사용할 경우:
    - Amazon Route 53 등 DNS 서비스에서 도메인 설정 필요

> S3 버킷은 기본적으로 외부에 비공개이며, 웹 사이트로 사용하려면 명시적으로 액세스를 허용해야 한다. 파일을 공개하는 만큼 보안에 각별한 주의가 필요하다.
> 

## 다른 서비스로 구축한 웹 호스팅과의 차이

S3 외에도 AWS에서는 다양한 웹 호스팅 서비스를 제공한다.

| 서비스 | 설명 |
| --- | --- |
| EC2 | 웹 서버를 자유롭게 구성할 수 있는 가상 서버 인스턴스 |
| Amazon Lightsail | EC2의 간단 버전. 웹 사이트 운영에 필요한 요소를 패키지로 제공 |
| AWS Amplify | 모바일/웹 앱을 위한 프레임워크 및 배포 도구. 개발자 중심 서비스 |

### Amazon Lightsail

- 필요한 기능을 선택하면 웹 호스팅에 필요한 요소 전체를 제공
- 예: EC2에서는 OS, 워드프레스 설치, 고정 IP, DNS 등을 직접 구성해야 하지만 Lightsail은 이를 하나의 패키지로 제공
- 요금도 EC2는 서비스별 합산, Lightsail은 단일 요금 구조
- 사양 변경 시에는:
    - 스냅샷(백업) 생성 후,
    - 새 인스턴스를 만들고 복원하는 방식으로 처리

### AWS Amplify

- 프론트엔드 개발자를 위한 플랫폼
- JavaScript 등을 사용해 AWS 기능을 손쉽게 연결
    - 예: S3를 통해 HTML/이미지 배포, Lambda로 백엔드 실행
- 콘텐츠 + 프로그램을 조합해 전체 애플리케이션 배포 가능

# 파일 업로드와 다운로드 : 다양한 파일 업로드 방법

Amazon S3에서는 관리 콘솔, API, SDK, CLI, SFTP 등 다양한 방법으로 파일을 업로드하거나 다운로드할 수 있다. 목적과 환경에 따라 적절한 방식을 선택할 수 있다.

## 업로드와 다운로드

- 가장 기본적인 방법은 AWS 관리 콘솔 사용
    - 드래그 앤 드롭 또는 마우스 클릭으로 파일 업로드 가능
    - 단, 드래그 앤 드롭은 Chrome, Firefox에서만 지원
- CLI를 이용하면 더 큰 파일도 업로드 가능
- 모든 형식의 파일 업로드 가능
- 파일 크기 제한:
    - 관리 콘솔: 최대 160GB
    - 이보다 클 경우: CLI 또는 SDK 사용 필수

## 다양한 업로드 방법

### 1. API & SDK

- API/SDK를 사용하면 프로그램이나 서드파티 도구에서 직접 업로드 가능
- IAM 사용자에게 Access Key / Secret Key를 발급하여 사용

### 2. 멀티파트 업로드 (Multipart Upload)

- 대용량 파일(100MB 이상)을 작게 나누어 병렬 업로드
- 업로드 중 중단 가능 → 일시 정지 후 재개 가능
- 실패한 부분만 재전송됨
- 업로드 완료 시에는 하나의 객체로 병합
- 일반적인 업로드와 동일하게 과금되며, 멀티파트 기능 자체에는 추가 요금 없음
- 관리 콘솔/CLI에서 자동 전환되어 사용되기도 함

### 3. AWS Transfer for SFTP

- SFTP 서버를 AWS가 대신 제공하는 서비스
- 설정한 SFTP 서버 엔드포인트를 통해 파일 전송
- 다양한 SFTP 클라이언트 도구와 호환
- 과금 기준:
    - 활성화 시간당 요금: $0.30/시간
    - 전송량당 요금: $0.04/GB (서울 리전, 2021년 기준)

### 4. AWS DataSync

- 온프레미스 ↔ AWS S3/EC2 간 대용량 데이터 전송용 서비스
- 자동화된 전송, 네트워크 최적화 제공
- 과금 기준: 복사된 데이터량 → $0.0125/GB (서울 리전, 2021년 기준)

### 5. 기타 하이브리드 전송 방식

- AWS Storage Gateway: 온프레미스 장비와 S3를 연결하여 S3를 로컬 디스크처럼 사용 가능
- 대규모 데이터 송수신(오프라인 물리적 전달)
    - AWS Snowball: 대용량 HDD 장비 배송
    - AWS Snowball Edge: 데이터 처리 기능 포함
    - AWS Snowmobile: 트럭을 통한 수백 PB 단위 전송

## cf) 공용 액세스 차단

- 공용 액세스 차단(Public Access Block): 버킷 차원에서 전역적으로 액세스를 차단할 수 있는 상위 제한
- 이 기능이 ‘차단’으로 설정되어 있으면, 버킷 정책이나 사용자 정책에서 허가하더라도 외부 접근 불가
- 정적 웹 사이트로 사용할 때는 공용 액세스 차단 해제 필수
    - 그렇지 않으면 외부 사용자가 파일에 접근할 수 없음

# 액세스 관리 및 변조 방지: 부정한 액세스 감시

S3는 관리자 외의 사용자도 많이 접근하는 스토리지이므로, 누가 무엇을 했는지 확인할 수 있도록 감시 기능이 중요하다

S3는 이러한 목적을 위해 무료 액세스 로그 기록 기능을 제공한다.

## 액세스 로그란

액세스 로그(access log) 는 S3 버킷에 대해 어떤 요청이 있었는지를 기록하는 기능

- 요금 없음 (단, 로그 파일 저장에 따른 S3 저장 비용은 발생)
- 로그는 동일 리전 내 버킷에 저장되어야 함
- 기록 내용: 버킷 소유자, 버킷명, 요청자, 작업 종류, 응답 시간, 상태 코드, 오류 코드 등

## 그 외에 액세스 관리 방법

### 1. 스토리지 클래스 분석 (Storage Class Analysis)

- 객체의 액세스 빈도를 분석하는 기능
- S3 Intelligent-Tiering 이동 여부 판단 자료로 활용
- 그룹 단위로 평균 전송량 등을 감시
- 최대 1,000개 필터로 감시 대상 객체를 선택 가능

### 2. 객체 잠금 (Object Lock)

- 객체를 수정, 삭제, 변조 못 하게 보호하는 기능
- 유효 기간을 설정하거나, 법적 보존용으로 영구 잠금 가능
- 객체 잠금이 활성화된 버킷은 CRR(Cross-Region Replication) 불가

### cf) 객체 잠금의 두 가지 보관 모드

| 보관 모드 | 설명 |
| --- | --- |
| **거버넌스 모드** | 특정 사용자에게만 객체 변경 권한 부여. 허가되지 않으면 변경 불가 |
| **규정 준수 모드** | 모든 사용자(루트 포함)가 변경 불가. 설정 이후 모드나 기간도 변경 불가 |

### 3. S3 인벤토리 (Inventory)

- 버킷 내 객체의 메타데이터 목록을 주기적으로 생성
- CSV, ORC 등 형식으로 제공
- Amazon Athena, Redshift Spectrum과 연계 가능

### 4. S3 배치 작업 (Batch Operations)

- 다수의 객체에 대해 일괄 작업 수행 가능
    - 예: 객체 복사, S3 Glacier에서 복원 등
- 내부적으로 Amazon S3 API를 사용 → 유연하고 편리함

# 버전 관리 • 수명 주기 • 복제 : 저장된 객체 관리

## 버전 관리

- 버전 관리(versioning) 는 객체의 변경 이력을 버전별로 저장하는 기능이다.
- 버킷 단위로 설정하며, 실수로 덮어쓰거나 삭제해도 이전 버전으로 복원 가능하다.

### cf) 설정 상태 종류

1. 미사용 (기본 상태)
2. 활성화 (Enabled): 버전별 객체 저장 시작
3. 버전 일시 중지 (Suspended): 기존 버전은 유지, 이후 버전은 저장 안 됨

### cf) 복원 방법

- 이전 버전 선택 후 복사하여 복원 가능
- 최신 버전 삭제만으로도 자동으로 이전 버전 복원 효과 있음

## 수명 주기 정책 (Lifecycle Policy)

- 객체를 일정 조건에 따라 자동으로 관리하는 정책
- 예: 스토리지 클래스 이동, 만료 후 삭제, 불완전 업로드 중지 등

| 작업 | 설명 |
| --- | --- |
| Transition | 객체를 다른 스토리지 클래스로 이동 |
| Expiration | 유효 기간 만료된 객체 삭제버전 관리 시 최신 버전만 적용됨 |
| NoncurrentVersionTransition | 과거 버전 객체를 다른 스토리지 클래스로 이동 |
| NoncurrentVersionExpiration | 과거 버전 객체를 삭제하기 전까지 유지 기간 지정 |
| AbortIncompleteMultipartUpload | 멀티파트 업로드가 완료되지 않은 객체 자동 중단 |
| ExpiredObjectDeleteMarker | 만료된 객체의 삭제 표시(delete marker) 제거 |

> 비용 최적화, 보관 정책 자동화에 매우 유용
> 

## 교차 리전 복제 (Cross-Region Replication, CRR)

- 객체를 다른 리전의 버킷에 비동기적으로 복사하는 기능
- 재해 복구(Disaster Recovery) 및 글로벌 백업에 활용 가능

### cf) 설정 조건

- 두 버킷 모두 버전 관리 활성화 필수
- 동일 리전 간 복제는 불가
- IAM 역할(Role) 을 통한 복제 권한 부여 필요
- 원본 버킷과 대상 버킷의 소유자가 달라도 설정 가능

### cf) 유의사항

- 복제 시 국외로 데이터가 이동될 수 있으므로, 국외 반출 금지 데이터는 복제 대상에서 제외해야 함
- 특히 기업이나 기관의 고객정보, 민감정보는 신중한 판단 필요

# 데이터 분석과 연계 : 저장된 데이터의 분석

## 데이터 분석과 연동

S3에는 객체나 그 내용을 분석할 수 있는 기능이 존재한다. S3 Select와 Amazon Athena는 구조화된 텍스트 파일(CSV, JSON 등)에 대해 SQL SELECT 문으로 직접 분석할 수 있도록 지원한다.

- 별도 분석 서버가 필요하지 않음
- Amazon Redshift Spectrum은 대용량 분석용으로 Redshift 클러스터가 필요함

## 데이터 분석 서비스

S3는 로그, IoT 수집 데이터 등 후속 분석을 위한 저장소로 자주 사용된다.

### S3 Select

- CSV, JSON, Apache Parquet 등 지원
- 객체 하나에 대해 SQL 문으로 직접 집계·검색 가능
- 관리 콘솔, CLI, SDK 지원 → 간단한 분석 또는 프로그램 기반 실행 가능

### Amazon Athena / Redshift Spectrum

| 항목 | Athena | Redshift Spectrum |
| --- | --- | --- |
| 분석 대상 | S3 내 여러 객체 | S3 및 외부 저장소 포함 |
| 서버 존재 여부 | 자동 생성 (서버리스) | Redshift 클러스터 필요 |
| 실행 방식 | 실행 순간 서버 생성 → 비용 청구 | 사전 구성된 서버로 지속 실행 |
| 처리 성능 | 일시적, 중간 성능 | 고성능 분산 처리 가능 |
| 사용 예 | 반복 쿼리, 단순 집계 | 대용량·복잡 연산, 머신러닝 기반 분석 등 |

## 데이터 분석 도구의 사용 구분

세 가지 분석 서비스의 차이점 및 사용 구분은 다음과 같다.

| 도구 | 특징 | 활용 예 |
| --- | --- | --- |
| S3 Select | 객체 단일 파일 대상, 가장 단순 | 특정 날짜의 매출 CSV 검색/집계 |
| Amazon Athena | 여러 객체 대상, 서버리스 | 반복되는 쿼리 분석, 빠른 응답 필요 시 |
| Redshift Spectrum | 대규모 병렬 분석, 고성능 필요 | 다중 조건 분석, 머신러닝 전처리 등 |
- 단순 분석 → S3 Select
- 중간 규모 분석 → Athena
- 대규모 분석 / 복잡한 로직 → Redshift Spectrum

## AWS Lambda와 연동

S3는 이벤트 기반 처리가 가능한 AWS Lambda와도 연동된다.

- 예: S3에 객체 업로드 → Lambda 함수 실행
- 활용 예시:
    - 이미지 업로드 시 썸네일 자동 생성
    - 파일 업로드 시 Slack 등으로 알림 발송
    - 실시간 로그 처리 및 집계 자동화

# Amazon CloudFront: 콘텐츠 배포 서비스

Amazon CloudFront 는 AWS에서 제공하는 고속 콘텐츠 전송 네트워크(CDN) 서비스이다.

전 세계에 위치한 엣지 서버(Edge Server)를 통해 웹 서버의 부하를 줄이고, 사용자에게 빠른 응답을 제공한다.

## Amazon Cloud Front와 엣지 서버

- CloudFront는 전 세계에 분산된 엣지 서버를 사용하여 웹 콘텐츠를 고속 전송하는 서비스
- 특히 S3 웹 사이트 호스팅과 함께 자주 사용됨

### cf) 엣지 서버의 역할

- 웹 콘텐츠를 엣지 서버에 캐시함으로써 원본 웹 서버의 부담을 감소
- 사용자는 가까운 엣지 서버로부터 응답을 받아 지연 시간 최소화
- 엣지 서버는 각 리전의 네트워크 끝단(Edge)에 위치하여 반응 속도를 높임

## Amazon CloudFront의 요금 체계

CloudFront는 요청 수, 전송량, 프로토콜 종류에 따라 요금이 달라진다.

| 항목 | 설명 |
| --- | --- |
| 데이터 송신량 | 사이트 접속자의 요청 및 응답에 따른 전송량에 대해 과금 |
| 캐시 전송량 | 엣지 서버가 원본에서 데이터를 캐싱하는 전송량은 무료, 하지만 캐시 요청에 대한 요금은 부과됨 |
| HTTP/HTTPS | HTTPS 트래픽은 보안 인증 비용 포함, 요금이 다를 수 있음 |
| 요청 수 | 요청 건수 기반 요금, 기본 1,000건까지는 무료 제공 |

## Amazon CloudFront의 요금 계층

CloudFront는 지역에 따라 3가지 요금 계층이 있으며, 선택한 계층에 따라 사용 가능한 엣지 서버 지역이 달라진다.

| 요금 계층 | 포함된 지역 (2021년 3월 기준) |
| --- | --- |
| **전체(ALL)** | 미국, 멕시코, 캐나다, 유럽, 남아프리카, 중동, 일본, 오스트레일리아, 뉴질랜드, 홍콩, 필리핀, 싱가포르, 대한민국, 대만, 인도, 남아메리카 |
| **200** | 미국, 멕시코, 캐나다, 유럽, 남아프리카, 중동, 일본, 홍콩, 필리핀, 싱가포르, 대한민국, 대만, 인도 |
| **100** | 미국, 멕시코, 캐나다, 유럽, 이스라엘 |

> 요금 계층이 높을수록 더 많은 엣지 서버에서 콘텐츠를 제공 가능
> 
> 
> 접속자 수와 비용을 고려하여 적절한 계층 선택 필요
> 

## cf) 암호화 통신 지원

- CloudFront는 HTTPS(TLS/SSL) 를 통한 암호화 통신을 기본 지원
- AWS의 Certificate Manager(ACM) 를 이용하면 무료 SSL 인증서 발급 가능
- 안전한 데이터 전송과 브라우저 신뢰성 확보에 필수적
